<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Annotations · NMRTools.jl</title><meta name="title" content="Annotations · NMRTools.jl"/><meta property="og:title" content="Annotations · NMRTools.jl"/><meta property="twitter:title" content="Annotations · NMRTools.jl"/><meta name="description" content="Documentation for NMRTools.jl."/><meta property="og:description" content="Documentation for NMRTools.jl."/><meta property="twitter:description" content="Documentation for NMRTools.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="NMRTools.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">NMRTools.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../quickstart/">Getting started</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorial-data/">Working with NMR data</a></li><li><a class="tocitem" href="../tutorial-plotrecipes/">Plotting</a></li><li><a class="tocitem" href="../tutorial-peaks/">Peak detection</a></li><li><a class="tocitem" href="../tutorial-metadata/">Metadata</a></li><li><a class="tocitem" href="../tutorial-animation/">Animating spectra</a></li><li><a class="tocitem" href="../tutorial-relaxation/">1D relaxation analysis</a></li><li><a class="tocitem" href="../tutorial-diffusion/">Diffusion analysis</a></li></ul></li><li><span class="tocitem">Metadata</span><ul><li><a class="tocitem" href="../metadata/">Overview</a></li><li><a class="tocitem" href="../metadata-timeunits/">Times and frequencies</a></li><li><a class="tocitem" href="../metadata-power/">Power levels</a></li><li><a class="tocitem" href="../metadata-fqlists/">Frequency lists</a></li><li><a class="tocitem" href="../metadata-windows/">Window functions</a></li><li><a class="tocitem" href="../metadata-samples/">Sample metadata</a></li></ul></li><li><a class="tocitem" href="../utilities/">Utilities</a></li><li><span class="tocitem">Reference guide</span><ul><li><a class="tocitem" href="../ref-referencing/">Chemical shift referencing</a></li><li><a class="tocitem" href="../ref-metadata/">Metadata</a></li><li class="is-active"><a class="tocitem" href>Annotations</a><ul class="internal"><li><a class="tocitem" href="#Motivation"><span>Motivation</span></a></li><li><a class="tocitem" href="#Design-Principles"><span>Design Principles</span></a></li><li><a class="tocitem" href="#Annotation-Syntax"><span>Annotation Syntax</span></a></li><li><a class="tocitem" href="#Using-Annotations-in-NMRTools.jl"><span>Using Annotations in NMRTools.jl</span></a></li><li><a class="tocitem" href="#Resources"><span>Resources</span></a></li><li><a class="tocitem" href="#Automatic-Dimension-Annotation"><span>Automatic Dimension Annotation</span></a></li></ul></li><li><a class="tocitem" href="../ref-coherences/">Coherences and isotope data</a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../indexes/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference guide</a></li><li class="is-active"><a href>Annotations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Annotations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/waudbygroup/NMRTools.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/waudbygroup/NMRTools.jl/blob/main/docs/src/ref-annotations.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="NMR-Pulse-Programme-Semantic-Annotation-System"><a class="docs-heading-anchor" href="#NMR-Pulse-Programme-Semantic-Annotation-System">NMR Pulse Programme Semantic Annotation System</a><a id="NMR-Pulse-Programme-Semantic-Annotation-System-1"></a><a class="docs-heading-anchor-permalink" href="#NMR-Pulse-Programme-Semantic-Annotation-System" title="Permalink"></a></h1><div class="admonition is-warning" id="Alpha-Development-Status-372a910f3caa3c77"><header class="admonition-header">Alpha Development Status<a class="admonition-anchor" href="#Alpha-Development-Status-372a910f3caa3c77" title="Permalink"></a></header><div class="admonition-body"><p>This annotation system is in early alpha development (currently v0.0.2). The schema, syntax, and functionality are subject to significant changes. Use with caution in production environments.</p></div></div><h2 id="Motivation"><a class="docs-heading-anchor" href="#Motivation">Motivation</a><a id="Motivation-1"></a><a class="docs-heading-anchor-permalink" href="#Motivation" title="Permalink"></a></h2><p>Modern NMR pulse programmes are cryptic text files that encode complex experimental procedures, but they lack semantic information about what they actually measure. Analysis software must guess at the meaning of parameters like <code>VALIST</code> or <code>VPLIST</code>, leading to errors and requiring manual interpretation.</p><p>This annotation system embeds structured semantic metadata directly within pulse programme files as comments, enabling:</p><ul><li><strong>Automated Analysis</strong>: Software can automatically understand experimental structure</li><li><strong>Reproducible Research</strong>: Clear provenance and citation information</li><li><strong>Knowledge Preservation</strong>: Experimental design captured alongside implementation</li><li><strong>Cross-Platform Compatibility</strong>: Vendor-agnostic semantic layer</li><li><strong>Collaborative Development</strong>: Track contributors and development status</li></ul><div class="admonition is-info" id="Current-Implementation-cc8014e593668390"><header class="admonition-header">Current Implementation<a class="admonition-anchor" href="#Current-Implementation-cc8014e593668390" title="Permalink"></a></header><div class="admonition-body"><p>Basic annotation parsing is implemented in NMRTools.jl. The system is under active development with ongoing refinement of the schema and parsing capabilities.</p></div></div><h2 id="Design-Principles"><a class="docs-heading-anchor" href="#Design-Principles">Design Principles</a><a id="Design-Principles-1"></a><a class="docs-heading-anchor-permalink" href="#Design-Principles" title="Permalink"></a></h2><h3 id="Human-and-Machine-Readable"><a class="docs-heading-anchor" href="#Human-and-Machine-Readable">Human and Machine Readable</a><a id="Human-and-Machine-Readable-1"></a><a class="docs-heading-anchor-permalink" href="#Human-and-Machine-Readable" title="Permalink"></a></h3><p>Annotations use simple comment syntax that NMR spectroscopists can read naturally whilst being structured enough for automated parsing.</p><h3 id="Embedded-and-Immutable"><a class="docs-heading-anchor" href="#Embedded-and-Immutable">Embedded and Immutable</a><a id="Embedded-and-Immutable-1"></a><a class="docs-heading-anchor-permalink" href="#Embedded-and-Immutable" title="Permalink"></a></h3><p>Metadata travels with the pulse programme file and cannot drift out of sync with the code.</p><h3 id="Modular-and-Extensible"><a class="docs-heading-anchor" href="#Modular-and-Extensible">Modular and Extensible</a><a id="Modular-and-Extensible-1"></a><a class="docs-heading-anchor-permalink" href="#Modular-and-Extensible" title="Permalink"></a></h3><p>Experiments are described as combinations of core types and features, allowing new variations without redefining the entire taxonomy.</p><h3 id="Version-Controlled"><a class="docs-heading-anchor" href="#Version-Controlled">Version Controlled</a><a id="Version-Controlled-1"></a><a class="docs-heading-anchor-permalink" href="#Version-Controlled" title="Permalink"></a></h3><p>Both individual pulse programmes and the annotation system itself are versioned for reproducibility and compatibility.</p><h2 id="Annotation-Syntax"><a class="docs-heading-anchor" href="#Annotation-Syntax">Annotation Syntax</a><a id="Annotation-Syntax-1"></a><a class="docs-heading-anchor-permalink" href="#Annotation-Syntax" title="Permalink"></a></h2><h3 id="Basic-Format"><a class="docs-heading-anchor" href="#Basic-Format">Basic Format</a><a id="Basic-Format-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Format" title="Permalink"></a></h3><p>Annotations are extensions of Bruker comment lines, marked with <code>;@</code>. Within these lines, annotations are written in YAML format. The initial <code>;@</code> will be stripped when parsing, permitting multi-line entries.</p><pre><code class="nohighlight hljs">;@ parameter: text value
;@ parameter1: 0.123
;@ parameter2: [list, of, items]
;@ parameter3: {associative: array, key: value}
;@ parameter4: |
;@   This is
;@   a multi-line
;@   entry.</code></pre><h3 id="Parameter-References"><a class="docs-heading-anchor" href="#Parameter-References">Parameter References</a><a id="Parameter-References-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-References" title="Permalink"></a></h3><p>Parameter and list variable names are referenced directly without special syntax:</p><pre><code class="language-yaml hljs">;@ r1rho:
;@   power: VALIST      # List variable
;@   duration: VPLIST   # List variable  
;@   offset: cnst28     # Constant parameter</code></pre><p>The context distinguishes parameter names (letters) from literal values (numbers). NMRTools automatically resolves these references to actual values from the acqus file when loading data.</p><h3 id="Dimension-References"><a class="docs-heading-anchor" href="#Dimension-References">Dimension References</a><a id="Dimension-References-1"></a><a class="docs-heading-anchor-permalink" href="#Dimension-References" title="Permalink"></a></h3><p>Dimensions use dotted path notation that references into experiment-specific parameter blocks:</p><pre><code class="language-yaml hljs">;@ dimensions: [r1rho.power, r1rho.duration, f1]
;@ r1rho:
;@   power: VALIST
;@   duration: VPLIST</code></pre><p>This creates an explicit connection: <code>r1rho.power</code> refers to the <code>power</code> field in the <code>r1rho</code> block, which is controlled by the <code>VALIST</code> parameter.</p><h2 id="Using-Annotations-in-NMRTools.jl"><a class="docs-heading-anchor" href="#Using-Annotations-in-NMRTools.jl">Using Annotations in NMRTools.jl</a><a id="Using-Annotations-in-NMRTools.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Annotations-in-NMRTools.jl" title="Permalink"></a></h2><p>The complete annotation schema is defined in the <a href="https://github.com/waudbygroup/pulseprograms">pulse programmes repository</a>. See the <a href="https://waudbylab.org/pulseprograms/schema/fields/">schema documentation</a> and <a href="https://github.com/waudbygroup/pulseprograms/blob/main/VOCABULARY.md">controlled vocabulary</a> for details.</p><p>In NMRTools.jl, parsed annotation data is accessible via the <code>:annotations</code> metadata field or the <a href="../api/#NMRTools.NMRBase.annotations-Tuple{AbstractNMRData}"><code>annotations()</code></a> convenience function.</p><h3 id="Accessing-annotation-data"><a class="docs-heading-anchor" href="#Accessing-annotation-data">Accessing annotation data</a><a id="Accessing-annotation-data-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-annotation-data" title="Permalink"></a></h3><p>Annotations can be accessed using the <code>annotations()</code> function, which provides convenient nested access to annotation data. Dotted notation is automatically expanded:</p><pre><code class="language-julia hljs"># Load a spectrum with annotations
spec = loadnmr(&quot;path/to/annotated/experiment&quot;)

# Access all annotations
all_annotations = annotations(spec)

# Access specific annotation fields
experiment_type = annotations(spec, &quot;experiment_type&quot;)

# Access nested dictionary fields - these are equivalent:
r1rho_duration = annotations(spec, &quot;r1rho&quot;, &quot;duration&quot;)
r1rho_duration = annotations(spec, &quot;r1rho.duration&quot;)

# Access array elements by index
first_dimension = annotations(spec, &quot;dimensions&quot;, 1)

# Deep nesting with dotted notation
calibration_start = annotations(spec, &quot;calibration.duration.start&quot;)</code></pre><p>The <code>annotations()</code> function accepts both string and symbol keys, and returns <code>nothing</code> if the requested field does not exist.</p><h3 id="Helper-Functions"><a class="docs-heading-anchor" href="#Helper-Functions">Helper Functions</a><a id="Helper-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Helper-Functions" title="Permalink"></a></h3><h4 id="referencepulse(spec,-nucleus)"><a class="docs-heading-anchor" href="#referencepulse(spec,-nucleus)"><code>referencepulse(spec, nucleus)</code></a><a id="referencepulse(spec,-nucleus)-1"></a><a class="docs-heading-anchor-permalink" href="#referencepulse(spec,-nucleus)" title="Permalink"></a></h4><p>Get the reference pulse calibration for a given nucleus:</p><pre><code class="language-julia hljs"># Get 19F reference pulse (returns tuple of pulse length and power)
p1, pl1 = referencepulse(spec, &quot;19F&quot;)

# Get 1H reference pulse
p3, pl2 = referencepulse(spec, :1H)</code></pre><p>Returns <code>nothing</code> if no reference pulse is found for the specified nucleus.</p><h3 id="Example:-19F-R1ρ-on-resonance-experiment"><a class="docs-heading-anchor" href="#Example:-19F-R1ρ-on-resonance-experiment">Example: 19F R1ρ on-resonance experiment</a><a id="Example:-19F-R1ρ-on-resonance-experiment-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-19F-R1ρ-on-resonance-experiment" title="Permalink"></a></h3><p>This example experiment is annotated as follows (schema v0.0.2):</p><pre><code class="nohighlight hljs">;@ schema_version: &quot;0.0.2&quot;
;@ sequence_version: &quot;0.1.0&quot;
;@ title: 19F on-resonance R1rho relaxation dispersion
;@ authors:
;@   - Chris Waudby &lt;c.waudby@ucl.ac.uk&gt;
;@   - Jan Overbeck
;@ created: 2020-01-01
;@ last_modified: 2025-11-15
;@ repository: github.com/waudbygroup/pulseprograms
;@ status: beta
;@ experiment_type: [r1rho, 1d]
;@ features: [on_resonance, temperature_compensation]
;@ typical_nuclei: [19F, 1H]
;@ citation:
;@   - Overbeck (2020)
;@ dimensions: [r1rho.power, r1rho.duration, f1]
;@ acquisition_order: [f1, r1rho.duration, r1rho.power]
;@ reference_pulse:
;@   - {channel: f1, pulse: p1, power: pl1}
;@   - {channel: f2, pulse: p3, power: pl2}
;@ r1rho:
;@   channel: f1
;@   power: VALIST
;@   duration: VPLIST
;@   offset: 0
;@   alignment: hard_pulse</code></pre><p>Using annotated data, we can access the experiment metadata:</p><pre><code class="language-julia hljs">using NMRTools

# Load the annotated experiment
spec = loadnmr(&quot;path/to/experiment&quot;)

# Access experiment metadata
annotations(spec, &quot;title&quot;)           # &quot;19F on-resonance R1rho relaxation dispersion&quot;
annotations(spec, &quot;experiment_type&quot;) # [&quot;r1rho&quot;, &quot;1d&quot;]
annotations(spec, &quot;features&quot;)        # [&quot;on_resonance&quot;, &quot;temperature_compensation&quot;]

# Access nested r1rho parameters (dotted notation works)
annotations(spec, &quot;r1rho.power&quot;)     # Vector of power values resolved from VALIST
annotations(spec, &quot;r1rho.duration&quot;)  # Vector of duration values resolved from VPLIST
annotations(spec, &quot;r1rho&quot;, &quot;channel&quot;) # &quot;f1&quot;
annotations(spec, &quot;r1rho&quot;, &quot;offset&quot;)  # 0 (on-resonance)

# Access dimension information
annotations(spec, &quot;dimensions&quot;)       # [&quot;r1rho.power&quot;, &quot;r1rho.duration&quot;, &quot;f1&quot;]
annotations(spec, &quot;dimensions&quot;, 1)    # &quot;r1rho.power&quot;

# Get reference pulse calibration
p1, pl1 = referencepulse(spec, &quot;19F&quot;)</code></pre><h3 id="Additional-Examples"><a class="docs-heading-anchor" href="#Additional-Examples">Additional Examples</a><a id="Additional-Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-Examples" title="Permalink"></a></h3><h4 id="CEST-Experiment"><a class="docs-heading-anchor" href="#CEST-Experiment">CEST Experiment</a><a id="CEST-Experiment-1"></a><a class="docs-heading-anchor-permalink" href="#CEST-Experiment" title="Permalink"></a></h4><pre><code class="language-yaml hljs">;@ schema_version: &quot;0.0.2&quot;
;@ sequence_version: &quot;1.0.0&quot;
;@ title: 19F CEST
;@ experiment_type: [cest, 1d]
;@ typical_nuclei: [19F]
;@ dimensions: [cest.offset, f1]
;@ acquisition_order: [f1, cest.offset]
;@ reference_pulse:
;@   - {channel: f1, pulse: p1, power: pl1}
;@ cest:
;@   channel: f1
;@   power: pl8
;@   duration: d18
;@   offset: FQ1LIST</code></pre><h4 id="Diffusion-Experiment"><a class="docs-heading-anchor" href="#Diffusion-Experiment">Diffusion Experiment</a><a id="Diffusion-Experiment-1"></a><a class="docs-heading-anchor-permalink" href="#Diffusion-Experiment" title="Permalink"></a></h4><pre><code class="language-yaml hljs">;@ schema_version: &quot;0.0.2&quot;
;@ sequence_version: &quot;2.0.1&quot;
;@ title: 1H STE diffusion
;@ experiment_type: [diffusion, 1d]
;@ features: [ste, watergate]
;@ typical_nuclei: [1H]
;@ dimensions: [diffusion.gradient_strength, f1]
;@ acquisition_order: [f1, diffusion.gradient_strength]
;@ reference_pulse:
;@   - {channel: f1, pulse: p1, power: pl1}
;@ diffusion:
;@   type: bipolar
;@   coherence: [f1, 1]
;@   big_delta: d20
;@   little_delta: p31
;@   tau: d17
;@   gradient_strength: {type: linear, start: cnst1, end: cnst2, scale: gpz6}
;@   gradient_shape: gpnam6</code></pre><h2 id="Resources"><a class="docs-heading-anchor" href="#Resources">Resources</a><a id="Resources-1"></a><a class="docs-heading-anchor-permalink" href="#Resources" title="Permalink"></a></h2><ul><li><a href="https://github.com/waudbygroup/pulseprograms">Pulse Programme Repository</a></li><li><a href="https://waudbylab.org/pulseprograms/schema/fields/">Schema Documentation</a></li><li><a href="https://github.com/waudbygroup/pulseprograms/blob/main/VOCABULARY.md">Controlled Vocabulary (VOCABULARY.md)</a></li><li><a href="https://github.com/waudbygroup/pulseprograms/blob/main/DECISIONS.md">Decision Log</a> - Design rationale and schema evolution</li></ul><h2 id="Automatic-Dimension-Annotation"><a class="docs-heading-anchor" href="#Automatic-Dimension-Annotation">Automatic Dimension Annotation</a><a id="Automatic-Dimension-Annotation-1"></a><a class="docs-heading-anchor-permalink" href="#Automatic-Dimension-Annotation" title="Permalink"></a></h2><p>When loading annotated data with <code>loadnmr</code>, NMRTools automatically applies semantic dimension types based on the <code>dimensions</code> array in the annotations. This eliminates manual calls to dimension setter functions.</p><h3 id="Supported-Dimension-Types"><a class="docs-heading-anchor" href="#Supported-Dimension-Types">Supported Dimension Types</a><a id="Supported-Dimension-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Supported-Dimension-Types" title="Permalink"></a></h3><table><tr><th style="text-align: right">Annotation Pattern</th><th style="text-align: right">Dimension Type</th><th style="text-align: right">Units</th><th style="text-align: right">Example</th></tr><tr><td style="text-align: right"><code>*.duration</code></td><td style="text-align: right"><code>TrelaxDim</code></td><td style="text-align: right">seconds</td><td style="text-align: right"><code>r1rho.duration</code>, <code>relaxation.duration</code></td></tr><tr><td style="text-align: right"><code>*.power</code></td><td style="text-align: right"><code>SpinlockDim</code></td><td style="text-align: right">Hz</td><td style="text-align: right"><code>r1rho.power</code></td></tr><tr><td style="text-align: right"><code>*.offset</code></td><td style="text-align: right"><code>OffsetDim</code></td><td style="text-align: right">ppm</td><td style="text-align: right"><code>cest.offset</code></td></tr><tr><td style="text-align: right"><code>*.g</code></td><td style="text-align: right"><code>G1Dim</code>/<code>G2Dim</code></td><td style="text-align: right">T/m</td><td style="text-align: right"><code>diffusion.g</code></td></tr></table><h3 id="Automatic-Conversions"><a class="docs-heading-anchor" href="#Automatic-Conversions">Automatic Conversions</a><a id="Automatic-Conversions-1"></a><a class="docs-heading-anchor-permalink" href="#Automatic-Conversions" title="Permalink"></a></h3><p>The annotation system automatically performs unit conversions:</p><ul><li><strong>Power → Hz</strong>: Power values (from <code>VALIST</code>) are converted to RF field strength in Hz using the reference pulse calibration</li><li><strong>FQList → ppm</strong>: Frequency lists (from <code>FQ1LIST</code> etc.) are converted from Hz offsets to absolute ppm values</li><li><strong>Gradient scaling</strong>: Gradient values are scaled by <code>gmax</code> to give actual field strengths</li></ul><h3 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Load annotated R1rho data
spec = loadnmr(&quot;path/to/r1rho/experiment&quot;)

# Dimensions are automatically typed based on annotations
dims(spec)
# (F1Dim(...), SpinlockDim(...), TrelaxDim(...))

# Access dimension values directly
collect(dims(spec, SpinlockDim))  # RF field strengths in Hz
collect(dims(spec, TrelaxDim))   # Spinlock durations in seconds

# Metadata is also set
spec[SpinlockDim, :units]  # &quot;Hz&quot;
spec[TrelaxDim, :units]    # &quot;s&quot;
spec[TrelaxDim, :delay_type]  # :r1rho</code></pre><h3 id="Manual-Dimension-Setting"><a class="docs-heading-anchor" href="#Manual-Dimension-Setting">Manual Dimension Setting</a><a id="Manual-Dimension-Setting-1"></a><a class="docs-heading-anchor-permalink" href="#Manual-Dimension-Setting" title="Permalink"></a></h3><p>If annotations are not available, dimensions can be set manually using:</p><ul><li><code>setrelaxtimes</code> - Set relaxation/delay dimension</li><li><code>setspinlockfield</code> - Set spinlock field strength dimension</li><li><code>setoffsets</code> - Set offset dimension</li><li><code>setgradientlist</code> - Set gradient dimension</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../ref-metadata/">« Metadata</a><a class="docs-footer-nextpage" href="../ref-coherences/">Coherences and isotope data »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Tuesday 27 January 2026 11:48">Tuesday 27 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
